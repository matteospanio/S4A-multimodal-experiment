<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/assets/controllers/stimulus_selector_controller.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/assets/controllers/stimulus_selector_controller.js" />
              <option name="originalContent" value="import { Controller } from '@hotwired/stimulus';&#10;&#10;/*&#10; * Stimulus Selector Controller&#10; * &#10; * Handles selection of audio/perfume stimuli choices&#10; */&#10;export default class extends Controller {&#10;    static values = { choice: String }&#10;    static targets = []&#10;&#10;    connect() {&#10;        this.element.addEventListener('click', this.selectStimulus.bind(this));&#10;    }&#10;&#10;    selectStimulus(event) {&#10;        event.preventDefault();&#10;        &#10;        // Remove selection from all other stimulus cards&#10;        document.querySelectorAll('.stimulus-card').forEach(card =&gt; {&#10;            card.classList.remove('selected');&#10;        });&#10;        &#10;        // Add selection to this card&#10;        this.element.classList.add('selected');&#10;        &#10;        // Store the selected choice&#10;        window.selectedChoice = this.choiceValue;&#10;&#10;        // Aggiorna il campo hidden del form con la scelta selezionata&#10;        const choiceInput = document.getElementById('choice-input');&#10;        if (choiceInput) {&#10;            choiceInput.value = this.choiceValue;&#10;        }&#10;        &#10;        // Enable submit button&#10;        const submitButton = document.getElementById('submit-choice');&#10;        if (submitButton) {&#10;            submitButton.disabled = false;&#10;        }&#10;        &#10;        // Visual feedback&#10;        this.element.style.transform = 'scale(1.05)';&#10;        setTimeout(() =&gt; {&#10;            this.element.style.transform = 'scale(1)';&#10;        }, 150);&#10;    }&#10;}" />
              <option name="updatedContent" value="import { Controller } from '@hotwired/stimulus';&#10;&#10;/*&#10; * Stimulus Selector Controller&#10; * &#10; * Handles selection of audio/perfume stimuli choices&#10; */&#10;export default class extends Controller {&#10;    static values = { choice: String }&#10;    static targets = []&#10;&#10;    connect() {&#10;        this.element.addEventListener('click', this.selectStimulus.bind(this));&#10;    }&#10;&#10;    selectStimulus(event) {&#10;        event.preventDefault();&#10;        &#10;        // Remove selection from all other stimulus cards&#10;        document.querySelectorAll('.stimulus-card').forEach(card =&gt; {&#10;            card.classList.remove('selected');&#10;        });&#10;        &#10;        // Add selection to this card&#10;        this.element.classList.add('selected');&#10;        &#10;        // Store the selected choice&#10;        window.selectedChoice = this.choiceValue;&#10;&#10;        // Aggiorna il campo hidden del form con la scelta selezionata&#10;        const choiceInput = document.getElementById('choice-input');&#10;        if (choiceInput) {&#10;            choiceInput.value = this.choiceValue;&#10;        }&#10;        &#10;        // Enable submit button&#10;        const submitButton = document.getElementById('submit-choice');&#10;        if (submitButton) {&#10;            submitButton.disabled = false;&#10;        }&#10;        &#10;        // Visual feedback&#10;        this.element.style.transform = 'scale(1.05)';&#10;        setTimeout(() =&gt; {&#10;            this.element.style.transform = 'scale(1)';&#10;        }, 150);&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/templates/task/index.html.twig">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/templates/task/index.html.twig" />
              <option name="originalContent" value="{% extends 'base.html.twig' %}&#10;&#10;{% block title %}{{ task_name }} - S4A Experiment{% endblock %}&#10;&#10;{% block body %}&#10;&lt;div class=&quot;container&quot;&gt;&#10;    &lt;div class=&quot;app-header&quot;&gt;&#10;        &lt;h1 class=&quot;app-title&quot;&gt;{{ task_name }}&lt;/h1&gt;&#10;        {% if task_type == 1 %}&#10;            &lt;p class=&quot;app-subtitle&quot;&gt;Listen to both audio stimuli, smell the perfume, then choose which audio best matches the scent&lt;/p&gt;&#10;        {% else %}&#10;            &lt;p class=&quot;app-subtitle&quot;&gt;Listen to the audio stimulus, then choose which of the two perfumes best matches&lt;/p&gt;&#10;        {% endif %}&#10;    &lt;/div&gt;&#10;&#10;    {{ form_start(form, {'action': path('app_task_submit', {'type': task_type, 'id': trial.id}), 'attr': {'id': 'trial-form'}}) }}&#10;        {{ form_widget(form.choice, {'attr': {'id': 'choice-input', 'style': 'display: none;'}}) }}&#10;        &lt;div class=&quot;row&quot;&gt;&#10;            &lt;div class=&quot;col-md-12&quot;&gt;&#10;                {% if task_type == 1 %}&#10;                    {# Task 1: Two audio stimuli + one perfume #}&#10;                    &lt;div class=&quot;row&quot;&gt;&#10;                        &lt;div class=&quot;col-md-6&quot;&gt;&#10;                            &lt;div class=&quot;card&quot;&gt;&#10;                                &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                    &lt;h4 class=&quot;card-title&quot;&gt;Audio Stimuli&lt;/h4&gt;&#10;&#10;                                    &lt;div class=&quot;audio-control&quot;&gt;&#10;                                        &lt;h5&gt;Audio Option A&lt;/h5&gt;&#10;                                        &lt;audio controls preload=&quot;metadata&quot;&gt;&#10;                                            &lt;source src=&quot;{{ trial.songs[0].url }}&quot; type=&quot;audio/wav&quot;&gt;&#10;                                            Your browser does not support the audio element.&#10;                                        &lt;/audio&gt;&#10;                                    &lt;/div&gt;&#10;&#10;                                    &lt;div class=&quot;audio-control&quot;&gt;&#10;                                        &lt;h5&gt;Audio Option B&lt;/h5&gt;&#10;                                        &lt;audio controls preload=&quot;metadata&quot;&gt;&#10;                                            &lt;source src=&quot;{{ trial.songs[1].url }}&quot; type=&quot;audio/wav&quot;&gt;&#10;                                            Your browser does not support the audio element.&#10;                                        &lt;/audio&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;col-md-6&quot;&gt;&#10;                            &lt;div class=&quot;card&quot;&gt;&#10;                                &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                    &lt;h4 class=&quot;card-title&quot;&gt;Perfume to Smell&lt;/h4&gt;&#10;                                    &lt;div class=&quot;icon-lg text-primary mb-3&quot;&gt;&#10;                                        {{ trial.flavor.icon }}&#10;                                    &lt;/div&gt;&#10;                                    &lt;p class=&quot;card-text&quot;&gt;Please smell the perfume sample provided&lt;/p&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;row mt-4&quot;&gt;&#10;                        &lt;div class=&quot;col-md-12&quot;&gt;&#10;                            &lt;h4 class=&quot;text-center mb-3&quot;&gt;Which audio best matches the perfume?&lt;/h4&gt;&#10;                            &lt;div class=&quot;row&quot;&gt;&#10;                                &lt;div class=&quot;col-md-6&quot;&gt;&#10;                                    &lt;div class=&quot;card stimulus-card&quot;&#10;                                         data-controller=&quot;stimulus-selector&quot;&#10;                                         data-stimulus-selector-choice-value=&quot;{{ trial.songs[0].id }}&quot;&gt;&#10;                                        &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                            &lt;div class=&quot;icon-md text-primary&quot;&gt;&#10;                                                &#10;                                            &lt;/div&gt;&#10;                                            &lt;h5&gt;Choose Audio A&lt;/h5&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;div class=&quot;col-md-6&quot;&gt;&#10;                                    &lt;div class=&quot;card stimulus-card&quot;&#10;                                         data-controller=&quot;stimulus-selector&quot;&#10;                                         data-stimulus-selector-choice-value=&quot;{{ trial.songs[1].id }}&quot;&gt;&#10;                                        &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                            &lt;div class=&quot;icon-md text-primary&quot;&gt;&#10;                                                &#10;                                            &lt;/div&gt;&#10;                                            &lt;h5&gt;Choose Audio B&lt;/h5&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                {% else %}&#10;                    {# Task 2: One audio stimulus + two perfume choices #}&#10;                    &lt;div class=&quot;row&quot;&gt;&#10;                        &lt;div class=&quot;col-md-12&quot;&gt;&#10;                            &lt;div class=&quot;card mb-4&quot;&gt;&#10;                                &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                    &lt;h4 class=&quot;card-title&quot;&gt;Audio Stimulus&lt;/h4&gt;&#10;                                    &lt;div class=&quot;audio-control&quot;&gt;&#10;                                        &lt;audio controls preload=&quot;metadata&quot;&gt;&#10;                                            &lt;source src=&quot;{{ trial.song.url }}&quot; type=&quot;audio/wav&quot;&gt;&#10;                                            Your browser does not support the audio element.&#10;                                        &lt;/audio&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;row&quot;&gt;&#10;                        &lt;div class=&quot;col-md-12&quot;&gt;&#10;                            &lt;h4 class=&quot;text-center mb-3&quot;&gt;Which perfume best matches the audio?&lt;/h4&gt;&#10;                            &lt;div class=&quot;row&quot;&gt;&#10;                                &lt;div class=&quot;col-md-6&quot;&gt;&#10;                                    &lt;div class=&quot;card stimulus-card&quot;&#10;                                         data-controller=&quot;stimulus-selector&quot;&#10;                                         data-stimulus-selector-choice-value=&quot;{{ trial.flavors[0].id }}&quot;&gt;&#10;                                        &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                            &lt;div class=&quot;icon-md text-primary&quot;&gt;&#10;                                                {{ trial.flavors[0].icon }}&#10;                                            &lt;/div&gt;&#10;                                            &lt;h5&gt;Perfume Option 1&lt;/h5&gt;&#10;                                            &lt;p class=&quot;card-text&quot;&gt;Smell the {{ trial.flavors[0] }} sample&lt;/p&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;div class=&quot;col-md-6&quot;&gt;&#10;                                    &lt;div class=&quot;card stimulus-card&quot;&#10;                                         data-controller=&quot;stimulus-selector&quot;&#10;                                         data-stimulus-selector-choice-value=&quot;{{ trial.flavors[1].id }}&quot;&gt;&#10;                                        &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                            &lt;div class=&quot;icon-md text-primary&quot;&gt;&#10;                                                {{ trial.flavors[1].icon }}&#10;                                            &lt;/div&gt;&#10;                                            &lt;h5&gt;Perfume Option 2&lt;/h5&gt;&#10;                                            &lt;p class=&quot;card-text&quot;&gt;Smell the {{ trial.flavors[1] }} sample&lt;/p&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                {% endif %}&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;row mt-4&quot;&gt;&#10;            &lt;div class=&quot;col-md-12 text-center&quot;&gt;&#10;                &lt;button class=&quot;btn btn-secondary me-3&quot; type=&quot;button&quot; onclick=&quot;window.history.back()&quot;&gt;&#10;                    ← Back to Menu&#10;                &lt;/button&gt;&#10;                &lt;button class=&quot;btn btn-primary&quot; id=&quot;submit-choice&quot; type=&quot;submit&quot; disabled&gt;&#10;                    Submit Choice →&#10;                &lt;/button&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    {{ form_end(form) }}&#10;&lt;/div&gt;&#10;{% endblock %}&#10;" />
              <option name="updatedContent" value="{% extends 'base.html.twig' %}&#10;&#10;{% block title %}{{ task_name }} - S4A Experiment{% endblock %}&#10;&#10;{% block body %}&#10;&lt;div class=&quot;container&quot;&gt;&#10;    &lt;div class=&quot;app-header&quot;&gt;&#10;        &lt;h1 class=&quot;app-title&quot;&gt;{{ task_name }}&lt;/h1&gt;&#10;        {% if task_type == 1 %}&#10;            &lt;p class=&quot;app-subtitle&quot;&gt;Listen to both audio stimuli, smell the perfume, then choose which audio best matches the scent&lt;/p&gt;&#10;        {% else %}&#10;            &lt;p class=&quot;app-subtitle&quot;&gt;Listen to the audio stimulus, then choose which of the two perfumes best matches&lt;/p&gt;&#10;        {% endif %}&#10;    &lt;/div&gt;&#10;&#10;    {{ form_start(form, {'action': path('app_task_submit', {'type': task_type, 'id': trial.id}), 'attr': {'id': 'trial-form'}}) }}&#10;        {# Campo hidden per la scelta, assicurati che sia un input hidden reale #}&#10;        &lt;input type=&quot;hidden&quot; id=&quot;choice-input&quot; name=&quot;{{ form.choice.vars.full_name }}&quot; value=&quot;&quot;&gt;&#10;        &lt;div class=&quot;row&quot;&gt;&#10;            &lt;div class=&quot;col-md-12&quot;&gt;&#10;                {% if task_type == 1 %}&#10;                    {# Task 1: Two audio stimuli + one perfume #}&#10;                    &lt;div class=&quot;row&quot;&gt;&#10;                        &lt;div class=&quot;col-md-6&quot;&gt;&#10;                            &lt;div class=&quot;card&quot;&gt;&#10;                                &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                    &lt;h4 class=&quot;card-title&quot;&gt;Audio Stimuli&lt;/h4&gt;&#10;&#10;                                    &lt;div class=&quot;audio-control&quot;&gt;&#10;                                        &lt;h5&gt;Audio Option A&lt;/h5&gt;&#10;                                        &lt;audio controls preload=&quot;metadata&quot;&gt;&#10;                                            &lt;source src=&quot;{{ trial.songs[0].url }}&quot; type=&quot;audio/wav&quot;&gt;&#10;                                            Your browser does not support the audio element.&#10;                                        &lt;/audio&gt;&#10;                                    &lt;/div&gt;&#10;&#10;                                    &lt;div class=&quot;audio-control&quot;&gt;&#10;                                        &lt;h5&gt;Audio Option B&lt;/h5&gt;&#10;                                        &lt;audio controls preload=&quot;metadata&quot;&gt;&#10;                                            &lt;source src=&quot;{{ trial.songs[1].url }}&quot; type=&quot;audio/wav&quot;&gt;&#10;                                            Your browser does not support the audio element.&#10;                                        &lt;/audio&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;&#10;                        &lt;div class=&quot;col-md-6&quot;&gt;&#10;                            &lt;div class=&quot;card&quot;&gt;&#10;                                &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                    &lt;h4 class=&quot;card-title&quot;&gt;Perfume to Smell&lt;/h4&gt;&#10;                                    &lt;div class=&quot;icon-lg text-primary mb-3&quot;&gt;&#10;                                        {{ trial.flavor.icon }}&#10;                                    &lt;/div&gt;&#10;                                    &lt;p class=&quot;card-text&quot;&gt;Please smell the perfume sample provided&lt;/p&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;row mt-4&quot;&gt;&#10;                        &lt;div class=&quot;col-md-12&quot;&gt;&#10;                            &lt;h4 class=&quot;text-center mb-3&quot;&gt;Which audio best matches the perfume?&lt;/h4&gt;&#10;                            &lt;div class=&quot;row&quot;&gt;&#10;                                &lt;div class=&quot;col-md-6&quot;&gt;&#10;                                    &lt;div class=&quot;card stimulus-card&quot;&#10;                                         data-controller=&quot;stimulus-selector&quot;&#10;                                         data-stimulus-selector-choice-value=&quot;{{ trial.songs[0].id }}&quot;&gt;&#10;                                        &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                            &lt;div class=&quot;icon-md text-primary&quot;&gt;&#10;                                                &#10;                                            &lt;/div&gt;&#10;                                            &lt;h5&gt;Choose Audio A&lt;/h5&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;div class=&quot;col-md-6&quot;&gt;&#10;                                    &lt;div class=&quot;card stimulus-card&quot;&#10;                                         data-controller=&quot;stimulus-selector&quot;&#10;                                         data-stimulus-selector-choice-value=&quot;{{ trial.songs[1].id }}&quot;&gt;&#10;                                        &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                            &lt;div class=&quot;icon-md text-primary&quot;&gt;&#10;                                                &#10;                                            &lt;/div&gt;&#10;                                            &lt;h5&gt;Choose Audio B&lt;/h5&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                {% else %}&#10;                    {# Task 2: One audio stimulus + two perfume choices #}&#10;                    &lt;div class=&quot;row&quot;&gt;&#10;                        &lt;div class=&quot;col-md-12&quot;&gt;&#10;                            &lt;div class=&quot;card mb-4&quot;&gt;&#10;                                &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                    &lt;h4 class=&quot;card-title&quot;&gt;Audio Stimulus&lt;/h4&gt;&#10;                                    &lt;div class=&quot;audio-control&quot;&gt;&#10;                                        &lt;audio controls preload=&quot;metadata&quot;&gt;&#10;                                            &lt;source src=&quot;{{ trial.song.url }}&quot; type=&quot;audio/wav&quot;&gt;&#10;                                            Your browser does not support the audio element.&#10;                                        &lt;/audio&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;&#10;                    &lt;div class=&quot;row&quot;&gt;&#10;                        &lt;div class=&quot;col-md-12&quot;&gt;&#10;                            &lt;h4 class=&quot;text-center mb-3&quot;&gt;Which perfume best matches the audio?&lt;/h4&gt;&#10;                            &lt;div class=&quot;row&quot;&gt;&#10;                                &lt;div class=&quot;col-md-6&quot;&gt;&#10;                                    &lt;div class=&quot;card stimulus-card&quot;&#10;                                         data-controller=&quot;stimulus-selector&quot;&#10;                                         data-stimulus-selector-choice-value=&quot;{{ trial.flavors[0].id }}&quot;&gt;&#10;                                        &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                            &lt;div class=&quot;icon-md text-primary&quot;&gt;&#10;                                                {{ trial.flavors[0].icon }}&#10;                                            &lt;/div&gt;&#10;                                            &lt;h5&gt;Perfume Option 1&lt;/h5&gt;&#10;                                            &lt;p class=&quot;card-text&quot;&gt;Smell the {{ trial.flavors[0] }} sample&lt;/p&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;div class=&quot;col-md-6&quot;&gt;&#10;                                    &lt;div class=&quot;card stimulus-card&quot;&#10;                                         data-controller=&quot;stimulus-selector&quot;&#10;                                         data-stimulus-selector-choice-value=&quot;{{ trial.flavors[1].id }}&quot;&gt;&#10;                                        &lt;div class=&quot;card-body text-center&quot;&gt;&#10;                                            &lt;div class=&quot;icon-md text-primary&quot;&gt;&#10;                                                {{ trial.flavors[1].icon }}&#10;                                            &lt;/div&gt;&#10;                                            &lt;h5&gt;Perfume Option 2&lt;/h5&gt;&#10;                                            &lt;p class=&quot;card-text&quot;&gt;Smell the {{ trial.flavors[1] }} sample&lt;/p&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                {% endif %}&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div class=&quot;row mt-4&quot;&gt;&#10;            &lt;div class=&quot;col-md-12 text-center&quot;&gt;&#10;                &lt;button class=&quot;btn btn-secondary me-3&quot; type=&quot;button&quot; onclick=&quot;window.history.back()&quot;&gt;&#10;                    ← Back to Menu&#10;                &lt;/button&gt;&#10;                &lt;button class=&quot;btn btn-primary&quot; id=&quot;submit-choice&quot; type=&quot;submit&quot; disabled&gt;&#10;                    Submit Choice →&#10;                &lt;/button&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    {{ form_end(form) }}&#10;&lt;/div&gt;&#10;{% endblock %}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>
