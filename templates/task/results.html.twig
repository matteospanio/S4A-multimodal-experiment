{% extends 'base.html.twig' %}

{% block title %}Trial Results - S4A Experiment{% endblock %}

{% block body %}
<div class="container" data-controller="confetti">
    <div class="app-header">
        {% if success %}
            <div class="alert alert-success mt-3">
                <i class="fas fa-check-circle"></i> {{ 'results.alert.success'|trans }}
            </div>
        {% else %}
            <div class="alert alert-info mt-3">
                <i class="fas fa-info-circle"></i> {{ 'results.alert.wrong'|trans }}
            </div>
        {% endif %}
    </div>

    {% if barChart %}
        <div class="chart-container mt-4">
            <h3>{{ 'results.chart.title'|trans }}:</h3>
            <p class="text-muted">
                {% if task == constant('App\\Entity\\Trial\\Trial::MUSICS2SMELL') %}
                    {{ 'results.chart.task_1'|trans }}
                {% else %}
                    {{ 'results.chart.task_2'|trans }}
                {% endif %}
            </p>
            {{ render_chart(barChart) }}
        </div>
    {% else %}
        <div class="alert alert-warning mt-4">
            <i class="fas fa-exclamation-triangle"></i>
            {{ 'results.chart.not_data'|trans }}
        </div>
    {% endif %}

    <div class="row mt-4">
        <div class="col-md-12 text-center">
            {% if is_granted('ROLE_ADMIN') %}
                <a class="btn btn-secondary me-3" href="{{ path('app_home') }}">
                    ‚Üê {{ 'task.back'|trans }}
                </a>
            {% endif %}
            <a href="{{ path('app_task', {'type': task == constant('App\\Entity\\Trial\\Trial::MUSICS2SMELL') ? 1 : 2}) }}" class="btn btn-primary">
                {{ 'task.repeat'|trans }}
                <twig:ux:icon name="bi:arrow-repeat" height="1rem" />
            </a>
        </div>
    </div>
</div>
{% endblock %}
